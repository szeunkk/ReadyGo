# API 명세서

---

## 문서 정보

| 항목        | 내용                                                                                                           |
| ----------- | -------------------------------------------------------------------------------------------------------------- |
| 작성자      | 김은경                                                                                                         |
| 최초 작성일 | 2024-12-30                                                                                                     |
| 최종 수정일 | 2024-12-31                                                                                                     |
| 관련 화면   | 로그인/회원가입 완료 후, 메인 진입 시                                                                          |
| 관련 이슈   | [사용자 요구사항 정의서(UR-70)](https://www.notion.so/UR-70-2ca130d16ff48118aa42c12295b0c626?source=copy_link) |

---

## 기능

- 사용자 상태(user_status) 초기 데이터 시딩 (Upsert)

## 카테고리

- UserStatus

## 설명

- 로그인 직후 또는 앱 초기 진입 시 `user_status` 테이블에 해당 사용자의 데이터가 존재하지 않을 수 있으므로, 이를 방지하기 위해 사용자의 상태를 'online'으로 초기화(또는 갱신)합니다.
- `user_status` 테이블에 이미 데이터가 존재하더라도 `user_id` 충돌 시 업데이트하는 방식(Upsert)으로 동작합니다.

---

## Method

- POST

## URL

- /api/user/status/seed

---

## Param

### Path Parameter

| key | 설명 | value 타입 | 옵션 | Nullable | 예시 |
| --- | ---- | ---------- | ---- | -------- | ---- |
| -   | -    | -          | -    | -        | -    |

### Query Parameter

| key | 설명 | value 타입 | 옵션 | Nullable | 예시 |
| --- | ---- | ---------- | ---- | -------- | ---- |
| -   | -    | -          | -    | -        | -    |

---

## 사용자

- 로그인 필요 여부: 예 (쿠키의 세션 정보 사용)
- 접근 가능한 사용자 범위: 로그인한 모든 사용자

---

## Request

### Header

| key    | 설명                              | value 타입 | 필수 | 비고                       |
| ------ | --------------------------------- | ---------- | ---- | -------------------------- |
| Cookie | sb-access-token, sb-refresh-token | string     | O    | Next.js 쿠키에서 자동 추출 |

### Body

| key | 설명 | value 타입 | 옵션 | Nullable | 예시 |
| --- | ---- | ---------- | ---- | -------- | ---- |
| -   | -    | -          | -    | -        | -    |

---

## Response

### Body

| key     | 설명        | value 타입 | 옵션 | Nullable | 예시                 |
| ------- | ----------- | ---------- | ---- | -------- | -------------------- |
| success | 성공 여부   | boolean    | -    | -        | true                 |
| error   | 에러 메시지 | string     | O    | -        | "인증이 필요합니다." |

### Example

**Success**

```json
{
  "success": true
}
```

**Error**

```json
{
  "error": "인증이 필요합니다."
}
```

---

## Status

| status | response content | 설명                            |
| ------ | ---------------- | ------------------------------- |
| 200    | OK               | 성공                            |
| 401    | AUTH_REQUIRED    | 인증 필요 (토큰 없음 또는 만료) |
| 500    | INTERNAL_ERROR   | 서버 오류 (DB Upsert 실패 등)   |

---

## 기타

- 프론트엔드 처리 시 주의사항: 이 API는 로그인 프로세스가 완료된 직후 호출되어야 사용자 상태 관리가 정상적으로 시작됩니다.
