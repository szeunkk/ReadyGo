아래의 조건을 모두 적용하여, 아래의 요구사항을 모두 구현할 것.
구현 결과를 체크리스트로 반환할 것.

==============================================

조건-커서룰) 아래의 커서룰을 적용하여 작업하고, 이 작업이 끝나면 해당 rules 적용 결과를 체크리스트로 반환할 것.
            - @01-common.mdc
            - @04-func.mdc

==============================================

조건-파일경로) 참고할 API 라우트 파일경로: src/app/api/party/[id]/members/route.ts
조건-파일경로) 구현될 API 라우트 파일경로: src/app/api/party/[id]/members/route.ts

==============================================

핵심요구사항) DELETE /api/party/[id]/members API를 구현할 것.
            1) 인증/권한 조건
                1-1) 인증 확인
                    - API는 쿠키의 'sb-access-token'을 통해 인증을 처리한다.
                    - 인증 토큰이 없는 경우: { error: '인증이 필요합니다.' }, status: 401 반환
                    - Supabase 클라이언트 생성 시 Authorization 헤더에 Bearer 토큰을 포함할 것.
                    - supabase.auth.getUser()를 통해 사용자 정보를 확인할 것.
                    - 사용자 정보가 없는 경우: { error: '인증이 필요합니다.' }, status: 401 반환

                1-2) 권한 확인
                    - 파티 작성자(creator_id)는 나가기 불가능하다.
                    - 파티 작성자가 나가기를 시도하는 경우: { error: '파티 작성자는 나갈 수 없습니다.' }, status: 400 반환

            2) API 구현 방법
                2-1) DELETE 메서드 추가
                    - 구현 위치: src/app/api/party/[id]/members/route.ts
                    - 기존 POST 메서드와 동일한 파일에 DELETE 메서드를 추가할 것.
                    - export const DELETE = async (request: NextRequest, { params }: { params: { id: string } }) => { ... } 형식으로 구현할 것.

                2-2) Supabase 클라이언트 생성
                    - import { createClient } from '@supabase/supabase-js' 사용
                    - import { Database } from '@/types/supabase' 사용
                    - import { cookies } from 'next/headers' 사용
                    - 환경 변수: NEXT_PUBLIC_SUPABASE_URL, NEXT_PUBLIC_SUPABASE_ANON_KEY 사용
                    - createClient<Database>(supabaseUrl, supabaseAnonKey, { auth: { persistSession: false }, global: { headers: { Authorization: `Bearer ${accessToken}` } } }) 형식으로 생성할 것.

                2-3) 파라미터 검증
                    - params.id를 parseInt(params.id, 10)로 변환할 것.
                    - NaN인 경우: { error: '유효하지 않은 파티 ID입니다.' }, status: 400 반환

                2-4) 파티 정보 조회
                    - party_posts 테이블에서 해당 파티의 creator_id를 조회할 것.
                    - supabase.from('party_posts').select('creator_id').eq('id', postId).single() 사용
                    - 파티가 존재하지 않는 경우 (PGRST116 에러 코드): { error: '파티를 찾을 수 없습니다.' }, status: 404 반환
                    - 기타 조회 에러: { error: fetchError.message }, status: 500 반환

                2-5) 작성자 확인
                    - partyData.creator_id와 user.id를 비교할 것.
                    - 작성자인 경우: { error: '파티 작성자는 나갈 수 없습니다.' }, status: 400 반환

                2-6) party_members 레코드 삭제
                    - supabase.from('party_members').delete().eq('post_id', postId).eq('user_id', user.id) 사용
                    - post_id와 user_id 모두 일치하는 레코드만 삭제할 것.
                    - 삭제 에러 발생 시: { error: deleteError.message }, status: 500 반환

                2-7) 성공 응답
                    - 성공 시: { success: true }, status: 200 반환

            3) 에러 처리
                3-1) 인증 에러
                    - 인증 토큰이 없는 경우: 401 상태 코드 반환
                    - 사용자 정보가 없는 경우: 401 상태 코드 반환

                3-2) 파라미터 에러
                    - 유효하지 않은 파티 ID: 400 상태 코드 반환
                    - 파티 작성자 나가기 시도: 400 상태 코드 반환

                3-3) 데이터 에러
                    - 파티가 존재하지 않는 경우: 404 상태 코드 반환
                    - 데이터베이스 조회/삭제 에러: 500 상태 코드 반환

                3-4) 예외 처리
                    - try-catch 블록으로 전체 로직을 감싸서 예상치 못한 에러를 처리할 것.
                    - 예외 발생 시: { error: '서버 오류가 발생했습니다.' }, status: 500 반환

            4) 테스트 검증 포인트
                4-1) 성공 시나리오
                    - 인증된 사용자가 자신이 참여한 파티에서 나가기 성공
                    - 응답: { success: true }, status: 200
                    - party_members 테이블에서 해당 레코드가 삭제되었는지 확인

                4-2) 실패 시나리오
                    - 인증되지 않은 사용자: 401 에러 반환
                    - 유효하지 않은 파티 ID: 400 에러 반환
                    - 존재하지 않는 파티: 404 에러 반환
                    - 파티 작성자가 나가기 시도: 400 에러 반환
                    - 참여하지 않은 파티에서 나가기 시도: 삭제는 성공하지만 레코드가 없을 수 있음 (정상 동작)

                4-3) 데이터 검증
                    - party_posts 테이블의 실제 데이터 사용
                    - party_members 테이블의 실제 데이터 사용
                    - 삭제 후 party_members 테이블에서 해당 레코드가 제거되었는지 확인

            5) 구현 참고사항
                5-1) 기존 POST 메서드 참고
                    - src/app/api/party/[id]/members/route.ts의 POST 메서드를 참고하여 동일한 스타일로 구현할 것.
                    - 인증 처리 방식, 에러 처리 방식, Supabase 클라이언트 생성 방식을 동일하게 유지할 것.

                5-2) 코드 구조
                    - 주석을 적절히 추가하여 각 단계를 명확히 구분할 것.
                    - 에러 메시지는 한글로 작성할 것.
                    - HTTP 상태 코드는 RESTful API 표준을 따를 것.

                5-3) 데이터베이스 스키마
                    - party_posts 테이블: id (bigint, PK), creator_id (uuid)
                    - party_members 테이블: post_id (bigint), user_id (uuid), role (text), joined_at (timestamptz)
                    - party_members 테이블에서 post_id와 user_id를 모두 조건으로 사용하여 삭제할 것.
