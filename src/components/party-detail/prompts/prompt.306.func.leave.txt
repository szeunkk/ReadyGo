아래의 조건을 모두 적용하여, 아래의 요구사항을 모두 구현할 것.
구현 결과를 체크리스트로 반환할 것.

==============================================

조건-커서룰) 아래의 커서룰을 적용하여 작업하고, 이 작업이 끝나면 해당 rules 적용 결과를 체크리스트로 반환할 것.
            - @01-common.mdc
            - @04-func.mdc

==============================================

조건-파일경로) 참고할 TSX  파일경로: src/components/party-detail/ui/party-info/partyInfo.tsx
조건-파일경로) 참고할 CSS  파일경로: src/components/party-detail/ui/party-info/styles.module.css
조건-파일경로) 참고할 API  파일경로: src/app/api/party/[id]/members/route.ts
조건-파일경로) 수정할 컴포넌트 파일경로: src/components/party-detail/index.tsx
조건-파일경로) 구현될 HOOK 파일경로: src/components/party-detail/hooks/index.leave.hook.ts
조건-파일경로) 구현될 TEST 파일경로: src/components/party-detail/tests/index.leave.hook.spec.ts

==============================================

핵심요구사항) 다음의 기능을 playwright 테스트를 활용하여 TDD기반으로 구현할 것.
            1) 테스트 제외 라이브러리
                - jest
                - @testing-library/react

            2) 테스트 조건
                - timeout은 설정하지 않거나, 500ms 미만으로 설정할 것.
                - 파티 상세 페이지(/party/[id])가 완전히 로드된 후 테스트할 것.
                    - 페이지 로드 식별 요구사항: 고정식별자 data-testid="party-detail-page" 대기 방법
                    - 페이지 로드 식별 금지사항: networkidle 대기 방법

핵심요구사항) 다음의 조건에 맞게 파티 나가기 기능을 step-by-step 으로 구현하고, 적용 결과를 체크리스트로 반환할 것.
            1) Hook 조건
                - Hook 이름: useLeaveParty
                - @src/components/party-detail/hooks/index.join.hook.ts를 참고하여 구현
                - useCallback을 사용하여 함수를 메모이제이션할 것.
                - 모든 기능 및 데이터는 해당 파일 안에서 처리하여, 다른 파일에 의존하지 않도록 구현할 것.

            2) API 호출 조건
                - API 엔드포인트: DELETE /api/party/[id]/members
                - API 라우트 파일 경로: src/app/api/party/[id]/members/route.ts 참고
                - API Route는 이미 존재하며 Supabase SSR 클라이언트를 사용함
                - 인증: credentials: 'include'를 사용하여 쿠키 자동 포함 (HttpOnly 쿠키 포함, 중요!)
                - 헤더: Content-Type 헤더는 DELETE 요청이므로 body가 없으면 생략 가능
                - 응답 형식: { success: boolean } 또는 { error: string }
                - 성공 상태 코드: 200
                - 실패 상태 코드: 400, 401, 404, 500

            3) 에러 처리 조건
                - 에러 발생 시 모달을 사용하여 사용자에게 알림
                - 모달 프로바이더 경로: src/commons/providers/modal/modal.provider.tsx
                - 이미 셋팅되어있는 modal.provider를 사용할 것.
                - 이미 셋팅되어있는 modal.provider를 수정하지 말 것.
                - 에러 모달: variant: 'dual', title: '나가기 실패', description: 에러 메시지, confirmText: '확인'
                - 네트워크 오류 시 적절한 에러 메시지 표시

            4) 성공 처리 조건
                - API 호출 성공 시 onRefetch 옵션이 제공되면 호출할 것.
                - 나가기 성공 후 UI 상태 업데이트를 위한 콜백 함수 반환
                - 나가기 성공 시 추가적인 상태 변경은 호출하는 컴포넌트에서 처리할 것.
                - 참여 상태가 업데이트되면 자동으로 버튼이 변경됨

            5) 인터페이스 조건
                - UseLeavePartyOptions 인터페이스:
                    - onRefetch?: () => Promise<void> (선택사항)
                - UseLeavePartyReturn 인터페이스:
                    - leaveParty: (partyId: number | string) => Promise<void> (파티 나가기 함수, partyId를 파라미터로 받음)

            6) 검증 조건
                - 파티 ID가 없거나 유효하지 않은 경우 early return
                - 파티 ID는 파라미터로 받은 값을 parseInt하여 숫자로 변환
                - 숫자 변환 실패 시 early return

            7) 컴포넌트 통합 조건
                - 파티 상세 컴포넌트(src/components/party-detail/index.tsx)에서 useLeaveParty Hook 사용
                - import { useLeaveParty } from './hooks/index.leave.hook';
                - useParams를 사용하여 파티 ID 가져오기
                - usePartyBinding의 refetch를 onRefetch 옵션으로 전달
                - const { leaveParty } = useLeaveParty({ onRefetch: refetch });
                - handleLeaveClick 함수 구현:
                    const handleLeaveClick = async () => {
                      if (partyId) {
                        try {
                          await leaveParty(partyId);
                          // 참여 상태가 업데이트되면 자동으로 버튼이 변경됨
                        } catch {
                          // 에러는 leaveParty 내부에서 모달로 처리
                        }
                      }
                    };
                - 파티 나가기 버튼 클릭 시 API 호출이 실행되도록 구현

            8) 테스트 검증 포인트(Playwright)
                - 파티 상세 페이지(/party/[id]) 로드 후 data-testid="party-detail-page"로 대기
                - 파티 인포의 파티 나가기 버튼 클릭 시 API 호출 확인 (DELETE /api/party/[id]/members)
                - 성공 시나리오: API 호출 성공 후 적절한 처리 확인
                - 실패 시나리오: 에러 발생 시 모달 노출 확인
                - 작성자 나가기 시나리오: 파티 작성자가 나가기 시도 시 에러 처리 확인 (작성자는 나갈 수 없음)
                - 미참여자 나가기 시나리오: 참여하지 않은 파티에서 나가기 시도 시 에러 처리 확인

            9) 구현 방법
                9-1) Hook 구조
                    - useModal로 모달 함수 가져오기
                    - useCallback으로 leaveParty 함수 메모이제이션
                    - leaveParty 함수는 partyId를 파라미터로 받음
                    - leaveParty 함수에서 API 호출 및 에러/성공 처리

                9-2) API 호출
                    - fetch를 사용하여 DELETE /api/party/[partyId]/members 호출
                    - credentials: 'include' 사용 (HttpOnly 쿠키 포함, 중요!)
                    - DELETE 요청이므로 body는 필요 없음
                    - 응답 상태 코드 확인
                    - 응답 JSON 파싱

                9-3) 에러 처리
                    - HTTP 상태 코드 확인 (4xx, 5xx)
                    - 응답의 error 필드 확인
                    - 에러 발생 시 openModal을 사용하여 에러 모달 표시
                    - 네트워크 오류 시 catch 블록에서 처리

                9-4) 성공 처리
                    - API 호출 성공 시 (200 상태 코드)
                    - options?.onRefetch가 있으면 호출
                    - 추가적인 UI 업데이트는 컴포넌트에서 처리

                9-5) 컴포넌트 통합
                    - src/components/party-detail/index.tsx 파일에서 useLeaveParty Hook import
                    - useParams로 파티 ID 가져오기 (const params = useParams(); const partyId = params?.id)
                    - usePartyBinding의 refetch를 onRefetch 옵션으로 전달하여 Hook 초기화
                    - handleLeaveClick 함수를 구현하여 Hook의 leaveParty 함수 호출
                    - leaveParty 호출 시 partyId를 파라미터로 전달 (await leaveParty(partyId))
                    - 에러는 leaveParty 내부에서 모달로 처리되므로 컴포넌트에서는 try-catch로 감싸되 에러 처리는 생략 가능

            10) 구현 패턴 참고
                - @src/components/party-detail/hooks/index.join.hook.ts의 구조를 참고하여 동일한 패턴으로 구현
                - POST 대신 DELETE 메서드 사용
                - 201 상태 코드 대신 200 상태 코드 확인
                - 에러 모달 제목: '참여 실패' 대신 '나가기 실패' 사용