ì•„ë˜ì˜ ì¡°ê±´ì„ ëª¨ë‘ ì ìš©í•˜ì—¬, ì•„ë˜ì˜ ìš”êµ¬ì‚¬í•­ì„ ëª¨ë‘ êµ¬í˜„í•  ê²ƒ.
êµ¬í˜„ ê²°ê³¼ë¥¼ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ ë°˜í™˜í•  ê²ƒ.

==============================================

ì¡°ê±´-ì»¤ì„œë£°) ì•„ë˜ì˜ ì»¤ì„œë£°ì„ ì ìš©í•˜ì—¬ ì‘ì—…í•˜ê³ , ì´ ì‘ì—…ì´ ëë‚˜ë©´ í•´ë‹¹ rules ì ìš© ê²°ê³¼ë¥¼ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ ë°˜í™˜í•  ê²ƒ.
            - @01-common.mdc
            - @04-func.mdc

==============================================

ì¡°ê±´-íŒŒì¼ê²½ë¡œ) ìˆ˜ì •í•  TSX íŒŒì¼ê²½ë¡œ: src/components/chat/ui/chat-room/chatRoom.tsx
ì¡°ê±´-íŒŒì¼ê²½ë¡œ) ì°¸ê³ í•  Hook íŒŒì¼ê²½ë¡œ: src/components/chat/hooks/useChatRoom.hook.tsx
ì¡°ê±´-íŒŒì¼ê²½ë¡œ) ì°¸ê³ í•  Repository íŒŒì¼ê²½ë¡œ: src/repositories/chat.repository.ts
ì¡°ê±´-íŒŒì¼ê²½ë¡œ) ì°¸ê³ í•  Auth Provider: src/commons/providers/auth/auth.provider.tsx

==============================================

í•µì‹¬ìš”êµ¬ì‚¬í•­) chatRoom.tsx ì»´í¬ë„ŒíŠ¸ëŠ” ì˜¤ë¡œì§€ UI ê¸°ëŠ¥ë§Œ ìˆ˜í–‰í•˜ê³ , ëª¨ë“  ë¡œì§(í¬ë§·íŒ…, ê·¸ë£¹í™”, ë°ì´í„° ì²˜ë¦¬ ë“±)ì€ Hookì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ êµ¬í˜„í•  ê²ƒ.
            ì±„íŒ… ëª©ë¡ ë°”ì¸ë”©(useChatList + chatList.tsx) íŒ¨í„´ì„ ì°¸ê³ í•˜ì—¬ ë™ì¼í•œ êµ¬ì¡°ë¡œ êµ¬í˜„í•  ê²ƒ.

            [ì›ì¹™]
            - ì»´í¬ë„ŒíŠ¸(chatRoom.tsx): UI ë Œë”ë§ë§Œ ë‹´ë‹¹, ìµœì†Œí•œì˜ UI ìƒíƒœ ê´€ë¦¬ë§Œ ìˆ˜í–‰
            - Hook(useChatRoom.hook.tsx): ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ë°ì´í„° í¬ë§·íŒ…, ê·¸ë£¹í™”, ìƒíƒœ ê´€ë¦¬ ì²˜ë¦¬
            - Hookì€ UIì—ì„œ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ í¬ë§·ëœ ë°ì´í„°ë¥¼ ë°˜í™˜ (formattedChatRooms íŒ¨í„´ ì°¸ê³ )

            1) Hook í™•ì¥ (useChatRoom.hook.tsx ìˆ˜ì • í•„ìš”)
                - useChatRoom Hookì„ í™•ì¥í•˜ì—¬ UIì—ì„œ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ í¬ë§·ëœ ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ë„ë¡ ìˆ˜ì •í•  ê²ƒ.
                - ë°˜í™˜ íƒ€ì…ì— ë‹¤ìŒ í•„ë“œ ì¶”ê°€:
                    - formattedMessages: FormattedMessageItem[] (UIì—ì„œ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ í¬ë§·ëœ ë©”ì‹œì§€ ë°°ì—´)
                    - otherMemberInfo: FormattedOtherMemberInfo | null (ìƒëŒ€ë°© ì •ë³´, í¬ë§·ëœ í˜•íƒœ)
                    - isBlocked: boolean (ì°¨ë‹¨ ìƒíƒœ, ê¸°ë³¸ê°’ false)
                - Hook ë‚´ë¶€ì—ì„œ ë‹¤ìŒ ë¡œì§ ì²˜ë¦¬:
                    - ë©”ì‹œì§€ ê·¸ë£¹í™” (ë‚ ì§œ êµ¬ë¶„ì„ , ì—°ì† ë©”ì‹œì§€ íŒë‹¨)
                    - ë©”ì‹œì§€ í¬ë§·íŒ… (formatMessageTime, formatMessageContent, formatDateDivider)
                    - ìƒëŒ€ë°© ì •ë³´ ì¡°íšŒ ë° í¬ë§·íŒ… (useChatList Hook í™œìš©)
                    - ì•„ë°”íƒ€ ì´ë¯¸ì§€ ê²½ë¡œ ê³„ì‚° (getAvatarImagePath ì‚¬ìš©)
                    - ì‚¬ìš©ì ìƒíƒœ ì¡°íšŒ (getEffectiveStatus ì‚¬ìš©)
                    - isOwnMessage íŒë‹¨ (í˜„ì¬ ì‚¬ìš©ì IDì™€ ë¹„êµ)
                - í¬ë§·íŒ… í•¨ìˆ˜ë“¤ì„ Hook ë‚´ë¶€ë¡œ ì´ë™:
                    - formatMessageTime: Hook ë‚´ë¶€ í•¨ìˆ˜ë¡œ ì´ë™
                    - formatDateDivider: Hook ë‚´ë¶€ í•¨ìˆ˜ë¡œ ì´ë™
                    - isNewDate: Hook ë‚´ë¶€ í•¨ìˆ˜ë¡œ ì´ë™
                    - isConsecutiveMessage: Hook ë‚´ë¶€ í•¨ìˆ˜ë¡œ ì´ë™
                    - formatMessageContent: Hook ë‚´ë¶€ í•¨ìˆ˜ë¡œ ì´ë™
                - FormattedMessageItem íƒ€ì… ì •ì˜ (Hook íŒŒì¼ì— ì¶”ê°€):
                    - type: 'date-divider' | 'message'
                    - date?: string | null (date-dividerì¸ ê²½ìš°)
                    - message?: ChatMessage (messageì¸ ê²½ìš°)
                    - isConsecutive?: boolean (messageì¸ ê²½ìš°)
                    - isOwnMessage?: boolean (messageì¸ ê²½ìš°)
                    - formattedTime?: string (messageì¸ ê²½ìš°)
                    - formattedContent?: string (messageì¸ ê²½ìš°)
                    - isRead?: boolean (messageì¸ ê²½ìš°)
                - FormattedOtherMemberInfo íƒ€ì… ì •ì˜ (Hook íŒŒì¼ì— ì¶”ê°€):
                    - id: string
                    - nickname: string
                    - avatarImagePath: string
                    - userStatus: 'online' | 'away' | 'dnd' | 'offline'
                    - animalType?: string
                - formattedMessages ìƒì„± ë¡œì§:
                    - messages ë°°ì—´ì„ ìˆœíšŒí•˜ë©° ë‚ ì§œ êµ¬ë¶„ì„ ê³¼ ë©”ì‹œì§€ë¥¼ í•¨ê»˜ í¬í•¨í•œ ë°°ì—´ ìƒì„±
                    - ê° ë©”ì‹œì§€ì— ëŒ€í•´ isOwnMessage, formattedTime, formattedContent, isRead ê³„ì‚°
                    - ì—°ì† ë©”ì‹œì§€ íŒë‹¨ ë¡œì§ í¬í•¨
                - otherMemberInfo ìƒì„± ë¡œì§:
                    - useChatList Hookì„ Hook ë‚´ë¶€ì—ì„œ í˜¸ì¶œí•˜ì—¬ chatRooms ì¡°íšŒ
                    - í˜„ì¬ roomIdì™€ ì¼ì¹˜í•˜ëŠ” ì±„íŒ…ë°© ì°¾ê¸°
                    - otherMember ì •ë³´ ì¶”ì¶œ ë° í¬ë§·íŒ…
                    - getAvatarImagePathë¡œ ì•„ë°”íƒ€ ì´ë¯¸ì§€ ê²½ë¡œ ê³„ì‚°
                    - getEffectiveStatusë¡œ ì‚¬ìš©ì ìƒíƒœ ì¡°íšŒ
                - ì£¼ì˜: Hook ë‚´ë¶€ì—ì„œ useChatListë¥¼ í˜¸ì¶œí•  ë•ŒëŠ” ë¬´í•œ ë£¨í”„ ë°©ì§€ë¥¼ ìœ„í•´ ì£¼ì˜ í•„ìš”
                    - useChatListëŠ” ìë™ìœ¼ë¡œ í˜¸ì¶œë˜ë¯€ë¡œ, useChatRoom ë‚´ë¶€ì—ì„œ í˜¸ì¶œí•´ë„ ë¬¸ì œ ì—†ìŒ
                    - ë˜ëŠ” useChatRoomì˜ íŒŒë¼ë¯¸í„°ë¡œ chatRoomsë¥¼ ë°›ë„ë¡ ìˆ˜ì • ê°€ëŠ¥

            2) ì»´í¬ë„ŒíŠ¸ ìˆ˜ì • (chatRoom.tsx)
                - roomId propì„ numberë¡œ ë³€í™˜í•˜ì—¬ useChatRoom Hookì— ì „ë‹¬í•  ê²ƒ.
                    - roomIdëŠ” string íƒ€ì… (URL íŒŒë¼ë¯¸í„°)ì´ë¯€ë¡œ parseInt(roomId, 10)ìœ¼ë¡œ ë³€í™˜
                    - parseInt ê²°ê³¼ê°€ NaNì¸ ê²½ìš° 0ì„ ì „ë‹¬ (Hookì´ early returní•˜ì—¬ ë¹ˆ ë©”ì‹œì§€ ëª©ë¡ ë°˜í™˜)
                    - roomIdê°€ ì—†ê±°ë‚˜ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš° 0 ì „ë‹¬
                - useChatRoom Hookì„ í˜¸ì¶œí•˜ì—¬ formattedMessages, otherMemberInfo, sendMessage, isLoading, error, isConnected, isBlockedë¥¼ ë°›ì„ ê²ƒ.
                - Hookì—ì„œ ë°›ì€ í¬ë§·ëœ ë°ì´í„°ë¥¼ ê·¸ëŒ€ë¡œ ë Œë”ë§:
                    - formattedMessagesë¥¼ mapí•˜ì—¬ ë Œë”ë§ (date-dividerì™€ message êµ¬ë¶„)
                    - otherMemberInfoë¥¼ ì‚¬ìš©í•˜ì—¬ í—¤ë” ì •ë³´ í‘œì‹œ
                    - í¬ë§·íŒ… ë¡œì§ì€ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì œê±° (Hookì—ì„œ ì²˜ë¦¬)
                - Mock ë°ì´í„° ë° í¬ë§·íŒ… í•¨ìˆ˜ ì œê±°:
                    - MOCK_ROOM_DATA, DEFAULT_MOCK_DATA ê°ì²´ ì œê±°
                    - MOCK_CURRENT_USER_ID ìƒìˆ˜ ì œê±°
                    - ChatMessage, ChatMessageRead ë“±ì˜ Mock íƒ€ì… ì •ì˜ ì œê±°
                    - formatMessageTime, formatDateDivider, isNewDate, isConsecutiveMessage í•¨ìˆ˜ ì œê±°
                    - mockChatRooms import ì œê±°
                - ë©”ì‹œì§€ ì „ì†¡ ê¸°ëŠ¥:
                    - Input ì»´í¬ë„ŒíŠ¸ì— ìƒíƒœ ê´€ë¦¬ ì¶”ê°€: const [messageInput, setMessageInput] = useState('');
                - Inputì˜ valueì™€ onChange ì—°ê²°
                    - ì „ì†¡ ë²„íŠ¼ í´ë¦­ ì‹œ: sendMessage(messageInput, 'text') í˜¸ì¶œ
                    - ì „ì†¡ ì„±ê³µ ì‹œ messageInput ì´ˆê¸°í™”
                - Enter í‚¤ ì…ë ¥ ì‹œ ì „ì†¡ (ì„ íƒì‚¬í•­)
                    - ì°¨ë‹¨ ìƒíƒœì¸ ê²½ìš° ì „ì†¡ ë¹„í™œì„±í™” (isBlocked ì‚¬ìš©)
                - ë¡œë”©/ì—ëŸ¬ ìƒíƒœ ì²˜ë¦¬:
                    - isLoadingì´ trueì¸ ê²½ìš° ë¡œë”© UI í‘œì‹œ
                    - errorê°€ nullì´ ì•„ë‹Œ ê²½ìš° ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ (ì„ íƒì‚¬í•­)
                - ì£¼ì˜: ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” í¬ë§·íŒ…, ê·¸ë£¹í™”, ë°ì´í„° ì²˜ë¦¬ ë¡œì§ì„ ëª¨ë‘ ì œê±°í•˜ê³ , Hookì—ì„œ ë°›ì€ ë°ì´í„°ë¥¼ ê·¸ëŒ€ë¡œ ë Œë”ë§ë§Œ í•  ê²ƒ.

==============================================

ì„¸ë¶€ìš”êµ¬ì‚¬í•­) Hook í™•ì¥ êµ¬í˜„ ìƒì„¸ (useChatRoom.hook.tsx)

            1) í¬ë§·íŒ… í•¨ìˆ˜ë“¤ì„ Hook ë‚´ë¶€ë¡œ ì´ë™
                - formatMessageTime: Hook ë‚´ë¶€ í•¨ìˆ˜ë¡œ ì´ë™
                    - created_atì´ nullì¸ ê²½ìš° ë¹ˆ ë¬¸ìì—´ ë°˜í™˜
                    - ì‹œê°„ í¬ë§·: "ì˜¤ì „/ì˜¤í›„ HH:MM" í˜•ì‹
                - formatDateDivider: Hook ë‚´ë¶€ í•¨ìˆ˜ë¡œ ì´ë™
                    - ë‚ ì§œ í¬ë§·: "YYYYë…„ MMì›” DDì¼ ìš”ì¼" í˜•ì‹
                - isNewDate: Hook ë‚´ë¶€ í•¨ìˆ˜ë¡œ ì´ë™
                    - ë‘ ë‚ ì§œê°€ ë‹¤ë¥¸ ë‚ ì¸ì§€ í™•ì¸
                - isConsecutiveMessage: Hook ë‚´ë¶€ í•¨ìˆ˜ë¡œ ì´ë™
                    - ê°™ì€ ë°œì‹ ìì´ê³  content_typeì´ 'system'ì´ ì•„ë‹Œ ê²½ìš° ì—°ì† ë©”ì‹œì§€ë¡œ íŒë‹¨
                - formatMessageContent: Hook ë‚´ë¶€ í•¨ìˆ˜ë¡œ ì´ë™
                    - contentê°€ nullì¸ ê²½ìš°: "ë©”ì‹œì§€ê°€ ì—†ìŠµë‹ˆë‹¤" ë°˜í™˜
                    - content_typeì´ 'image'ì¸ ê²½ìš°: "ğŸ“· ì´ë¯¸ì§€" ë°˜í™˜
                    - content_typeì´ 'system'ì¸ ê²½ìš°: content ê·¸ëŒ€ë¡œ ë°˜í™˜
                    - ê·¸ ì™¸: content ë°˜í™˜

            2) formattedMessages ìƒì„± ë¡œì§
                - useMemoë¥¼ ì‚¬ìš©í•˜ì—¬ messages ë³€ê²½ ì‹œ ì¬ê³„ì‚°
                - messages ë°°ì—´ì„ ìˆœíšŒí•˜ë©° ë‹¤ìŒ ë¡œì§ ìˆ˜í–‰:
                    - ì´ì „ ë©”ì‹œì§€ì™€ ë‚ ì§œ ë¹„êµ (isNewDate ì‚¬ìš©)
                    - ë‚ ì§œê°€ ë‹¤ë¥´ë©´ date-divider ì•„ì´í…œ ì¶”ê°€
                    - ë©”ì‹œì§€ ì•„ì´í…œ ì¶”ê°€:
                        - isConsecutive ê³„ì‚° (isConsecutiveMessage ì‚¬ìš©)
                        - isOwnMessage ê³„ì‚° (sender_id === currentUserId)
                        - formattedTime ê³„ì‚° (formatMessageTime ì‚¬ìš©)
                        - formattedContent ê³„ì‚° (formatMessageContent ì‚¬ìš©)
                        - isRead ê³„ì‚° (is_read í•„ë“œ ì‚¬ìš©, nullì´ë©´ false)
                - ë°˜í™˜ íƒ€ì…: Array<FormattedMessageItem>

            3) otherMemberInfo ìƒì„± ë¡œì§
                - useChatList Hookì„ Hook ë‚´ë¶€ì—ì„œ í˜¸ì¶œ (ë˜ëŠ” íŒŒë¼ë¯¸í„°ë¡œ ë°›ê¸°)
                - useMemoë¥¼ ì‚¬ìš©í•˜ì—¬ roomId, chatRooms ë³€ê²½ ì‹œ ì¬ê³„ì‚°
                - chatRooms ë°°ì—´ì—ì„œ í˜„ì¬ roomIdì™€ ì¼ì¹˜í•˜ëŠ” ì±„íŒ…ë°© ì°¾ê¸°
                - otherMember ì •ë³´ ì¶”ì¶œ ë° í¬ë§·íŒ…:
                    - nickname: otherMember?.nickname ?? "ì•Œ ìˆ˜ ì—†ìŒ"
                    - avatarImagePath: getAvatarImagePath(otherMember?.avatar_url, otherMember?.animal_type)
                    - userStatus: otherMember?.id ? getEffectiveStatus(otherMember.id) : 'offline'
                    - animalType: otherMember?.animal_type
                    - id: otherMember?.id ?? ''
                - ë°˜í™˜ íƒ€ì…: FormattedOtherMemberInfo | null

            4) íƒ€ì… ì •ì˜ ì¶”ê°€
                - FormattedMessageItem íƒ€ì… ì •ì˜
                - FormattedOtherMemberInfo íƒ€ì… ì •ì˜
                - UseChatRoomReturn íƒ€ì…ì— formattedMessages, otherMemberInfo, isBlocked ì¶”ê°€

==============================================

ì„¸ë¶€ìš”êµ¬ì‚¬í•­) ì»´í¬ë„ŒíŠ¸ êµ¬í˜„ ìƒì„¸ (chatRoom.tsx)

            1) Hook ì‚¬ìš©
                - useChatRoom Hook í˜¸ì¶œ:
                    - const roomIdNumber = isNaN(parseInt(roomId, 10)) ? 0 : parseInt(roomId, 10);
                    - const { formattedMessages, otherMemberInfo, sendMessage, isLoading, error, isBlocked } = useChatRoom({ roomId: roomIdNumber });
                - useSideProfilePanel Hookì€ ê·¸ëŒ€ë¡œ ìœ ì§€
                - messageInput ìƒíƒœ ì¶”ê°€ (UI ìƒíƒœë§Œ ê´€ë¦¬)

            2) ë©”ì‹œì§€ ë Œë”ë§
                - formattedMessagesë¥¼ mapí•˜ì—¬ ë Œë”ë§:
                    - item.type === 'date-divider'ì¸ ê²½ìš°: ë‚ ì§œ êµ¬ë¶„ì„  ë Œë”ë§
                    - item.type === 'message'ì¸ ê²½ìš°: ë©”ì‹œì§€ ë Œë”ë§
                    - item.isOwnMessageë¡œ ë‚´ ë©”ì‹œì§€/ìƒëŒ€ë°© ë©”ì‹œì§€ êµ¬ë¶„
                    - item.isConsecutiveë¡œ ì•„ë°”íƒ€ í‘œì‹œ ì—¬ë¶€ ê²°ì •
                    - item.formattedTime, item.formattedContent ì‚¬ìš©
                    - item.isReadë¡œ ì½ìŒ í‘œì‹œ ì—¬ë¶€ ê²°ì •
                - í¬ë§·íŒ… ë¡œì§ì€ ëª¨ë‘ ì œê±° (Hookì—ì„œ ì²˜ë¦¬ëœ ë°ì´í„° ì‚¬ìš©)

            3) í—¤ë” ë Œë”ë§
                - otherMemberInfoë¥¼ ì‚¬ìš©í•˜ì—¬ í—¤ë” ì •ë³´ í‘œì‹œ:
                    - nickname: otherMemberInfo?.nickname ?? "ì•Œ ìˆ˜ ì—†ìŒ"
                    - avatarImagePath: otherMemberInfo?.avatarImagePath
                    - userStatus: otherMemberInfo?.userStatus ?? 'offline'
                    - animalType: otherMemberInfo?.animalType
                - ìƒëŒ€ë°© ì •ë³´ ì¡°íšŒ ë¡œì§ì€ ëª¨ë‘ ì œê±° (Hookì—ì„œ ì²˜ë¦¬ëœ ë°ì´í„° ì‚¬ìš©)

            4) ë©”ì‹œì§€ ì „ì†¡
                - handleSendMessage í•¨ìˆ˜ ì‘ì„±:
                    - messageInputì´ ë¹„ì–´ìˆìœ¼ë©´ ì „ì†¡í•˜ì§€ ì•ŠìŒ
                    - sendMessage(messageInput, 'text') í˜¸ì¶œ
                    - try-catchë¡œ ì—ëŸ¬ ì²˜ë¦¬
                    - ì „ì†¡ ì„±ê³µ ì‹œ setMessageInput('')ë¡œ ì´ˆê¸°í™”
                - Enter í‚¤ ì…ë ¥ ì‹œ ì „ì†¡ (ì„ íƒì‚¬í•­)
                - ì°¨ë‹¨ ìƒíƒœì¸ ê²½ìš° ì „ì†¡ ë¹„í™œì„±í™” (isBlocked ì‚¬ìš©)

            5) ê¸°ì¡´ UI êµ¬ì¡° ìœ ì§€
                - í—¤ë”, ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸, ì…ë ¥ ì˜ì—­ êµ¬ì¡°ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€
                - ìŠ¤íƒ€ì¼ë§ì€ ë³€ê²½í•˜ì§€ ì•ŠìŒ
                - ì ‘ê·¼ì„± ì†ì„±(aria-label ë“±)ì€ ê·¸ëŒ€ë¡œ ìœ ì§€

==============================================

ì„¸ë¶€ìš”êµ¬ì‚¬í•­) ì—ëŸ¬ ì²˜ë¦¬ ë° ì˜ˆì™¸ ìƒí™©

            1) Hookì—ì„œ ì²˜ë¦¬í•  ì˜ˆì™¸ ìƒí™©
                - roomId ì—†ìŒ ë˜ëŠ” ìœ íš¨í•˜ì§€ ì•ŠìŒ:
                    - roomIdê°€ 0 ì´í•˜ì¸ ê²½ìš°: formattedMessagesë¥¼ ë¹ˆ ë°°ì—´ë¡œ ë°˜í™˜, otherMemberInfoë¥¼ nullë¡œ ë°˜í™˜
                    - early returní•˜ì—¬ ì¶”ê°€ ì²˜ë¦¬ ì¤‘ë‹¨
                - ì‚¬ìš©ì ì¸ì¦ ì—†ìŒ:
                    - user?.idê°€ ì—†ëŠ” ê²½ìš°: formattedMessagesë¥¼ ë¹ˆ ë°°ì—´ë¡œ ë°˜í™˜, otherMemberInfoë¥¼ nullë¡œ ë°˜í™˜
                    - Hook ë‚´ë¶€ì—ì„œ useAuthë¥¼ í˜¸ì¶œí•˜ë¯€ë¡œ ìë™ ì²˜ë¦¬ë¨
                - ë©”ì‹œì§€ í•„ë“œ null ì²˜ë¦¬:
                    - formatMessageContent: contentê°€ nullì´ë©´ "ë©”ì‹œì§€ê°€ ì—†ìŠµë‹ˆë‹¤" ë°˜í™˜
                    - formatMessageTime: created_atì´ nullì´ë©´ ë¹ˆ ë¬¸ìì—´ ë°˜í™˜
                    - is_read: nullì´ë©´ falseë¡œ ì²˜ë¦¬
                - ìƒëŒ€ë°© ì •ë³´ ì—†ìŒ:
                    - chatRoomsì—ì„œ í•´ë‹¹ roomIdë¥¼ ì°¾ì§€ ëª»í•œ ê²½ìš°: ê¸°ë³¸ê°’ ì‚¬ìš©
                    - nickname: "ì•Œ ìˆ˜ ì—†ìŒ"
                    - avatarImagePath: getAvatarImagePath(null, null) â†’ ê¸°ë³¸ê°’ bear ì•„ë°”íƒ€
                    - userStatus: 'offline'
                - ë¡œë”©/ì—ëŸ¬ ìƒíƒœ:
                    - isLoading, error ìƒíƒœëŠ” Hookì—ì„œ ê´€ë¦¬
                    - ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” Hookì—ì„œ ë°›ì€ ìƒíƒœë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©

            2) ì»´í¬ë„ŒíŠ¸ì—ì„œ ì²˜ë¦¬í•  ì˜ˆì™¸ ìƒí™©
                - roomId ì—†ìŒ ë˜ëŠ” ìœ íš¨í•˜ì§€ ì•ŠìŒ:
                    - formattedMessagesê°€ ë¹ˆ ë°°ì—´ì¸ ê²½ìš°: ë¹ˆ ë©”ì‹œì§€ UI í‘œì‹œ
                    - otherMemberInfoê°€ nullì¸ ê²½ìš°: ê¸°ë³¸ê°’ ì‚¬ìš© ("ì•Œ ìˆ˜ ì—†ìŒ", ê¸°ë³¸ ì•„ë°”íƒ€)
                - ë¡œë”© ì¤‘:
                    - isLoading === trueì¸ ê²½ìš°: ë¡œë”© UI í‘œì‹œ
                - ì—ëŸ¬ ë°œìƒ:
                    - errorê°€ nullì´ ì•„ë‹Œ ê²½ìš°: ì½˜ì†” ì—ëŸ¬ ë¡œê·¸ ì¶œë ¥ (ì„ íƒì‚¬í•­: UI í‘œì‹œ)
                    - ì—ëŸ¬ ë°œìƒ ì‹œì—ë„ ê¸°ì¡´ UIëŠ” ìœ ì§€í•˜ì—¬ ì•±ì´ ì¤‘ë‹¨ë˜ì§€ ì•Šë„ë¡ ì²˜ë¦¬
                - ì „ì†¡ ì‹¤íŒ¨:
                    - sendMessage í˜¸ì¶œ ì‹¤íŒ¨ ì‹œ: ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ ë˜ëŠ” í† ìŠ¤íŠ¸ ì•Œë¦¼
                    - messageInputì€ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ì—¬ ì¬ì „ì†¡ ê°€ëŠ¥í•˜ë„ë¡ ì²˜ë¦¬
                - ë©”ì‹œì§€ ì—†ìŒ:
                    - formattedMessages.length === 0ì¸ ê²½ìš°: ë¹ˆ ë©”ì‹œì§€ UI í‘œì‹œ

==============================================

ì²´í¬ë¦¬ìŠ¤íŠ¸) êµ¬í˜„ì´ ì™„ë£Œë˜ë©´ ë‹¤ìŒ í•­ëª©ì„ í¬í•¨í•œ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•  ê²ƒ.
            - [ ] ì»¤ì„œë£° @01-common.mdc ì ìš© ê²°ê³¼
            - [ ] ì»¤ì„œë£° @04-func.mdc ì ìš© ê²°ê³¼
            - [ ] useChatRoom Hook í™•ì¥ ì™„ë£Œ (formattedMessages, otherMemberInfo, isBlocked ì¶”ê°€)
            - [ ] í¬ë§·íŒ… í•¨ìˆ˜ë“¤ì„ Hook ë‚´ë¶€ë¡œ ì´ë™ ì™„ë£Œ (formatMessageTime, formatDateDivider, isNewDate, isConsecutiveMessage, formatMessageContent)
            - [ ] FormattedMessageItem íƒ€ì… ì •ì˜ ì™„ë£Œ
            - [ ] FormattedOtherMemberInfo íƒ€ì… ì •ì˜ ì™„ë£Œ
            - [ ] formattedMessages ìƒì„± ë¡œì§ êµ¬í˜„ ì™„ë£Œ (ë‚ ì§œ êµ¬ë¶„ì„ , ì—°ì† ë©”ì‹œì§€, í¬ë§·íŒ… í¬í•¨)
            - [ ] otherMemberInfo ìƒì„± ë¡œì§ êµ¬í˜„ ì™„ë£Œ (useChatList í™œìš©, ì•„ë°”íƒ€ ê²½ë¡œ, ì‚¬ìš©ì ìƒíƒœ í¬í•¨)
            - [ ] useChatRoom Hook import ë° ì‚¬ìš© ì™„ë£Œ (ì»´í¬ë„ŒíŠ¸ì—ì„œ)
            - [ ] roomId string â†’ number ë³€í™˜ ì™„ë£Œ (NaN ì²˜ë¦¬ í¬í•¨)
            - [ ] roomIdê°€ 0ì¸ ê²½ìš° UI ì²˜ë¦¬ ì™„ë£Œ (ë¹ˆ ìƒíƒœ)
            - [ ] Mock ë°ì´í„° ë° íƒ€ì… ì •ì˜ ì œê±° ì™„ë£Œ (ì»´í¬ë„ŒíŠ¸ì—ì„œ)
            - [ ] í¬ë§·íŒ… í•¨ìˆ˜ ì œê±° ì™„ë£Œ (ì»´í¬ë„ŒíŠ¸ì—ì„œ)
            - [ ] formattedMessages ë Œë”ë§ ì™„ë£Œ (date-dividerì™€ message êµ¬ë¶„)
            - [ ] otherMemberInfoë¥¼ ì‚¬ìš©í•œ í—¤ë” ë Œë”ë§ ì™„ë£Œ
            - [ ] ë©”ì‹œì§€ ì „ì†¡ ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ (Input ìƒíƒœ, ì „ì†¡ ë²„íŠ¼, ì—ëŸ¬ ì²˜ë¦¬)
            - [ ] ë¡œë”© ìƒíƒœ ì²˜ë¦¬ ì™„ë£Œ (ì»´í¬ë„ŒíŠ¸ì—ì„œ)
            - [ ] ì—ëŸ¬ ìƒíƒœ ì²˜ë¦¬ ì™„ë£Œ (ì»´í¬ë„ŒíŠ¸ì—ì„œ)
            - [ ] ê¸°ì¡´ UI êµ¬ì¡° ë° ìŠ¤íƒ€ì¼ ìœ ì§€ ì™„ë£Œ
            - [ ] ì ‘ê·¼ì„± ì†ì„± ìœ ì§€ ì™„ë£Œ
            - [ ] ì»´í¬ë„ŒíŠ¸ëŠ” UIë§Œ ë‹´ë‹¹í•˜ê³  ë¡œì§ì€ ëª¨ë‘ Hookì—ì„œ ì²˜ë¦¬í•˜ëŠ” êµ¬ì¡° ì™„ë£Œ

==============================================

ì°¸ê³ ì‚¬í•­) 

            1) ì±„íŒ… ëª©ë¡ ë°”ì¸ë”© íŒ¨í„´ ì°¸ê³ :
               - useChatList Hook: ëª¨ë“  ë¡œì§(í¬ë§·íŒ…, ìƒíƒœ ê´€ë¦¬)ì„ Hookì—ì„œ ì²˜ë¦¬
               - chatList.tsx ì»´í¬ë„ŒíŠ¸: Hookì—ì„œ ë°›ì€ formattedChatRoomsë¥¼ ê·¸ëŒ€ë¡œ ë Œë”ë§
               - ë™ì¼í•œ íŒ¨í„´ì„ useChatRoom + chatRoom.tsxì— ì ìš©í•  ê²ƒ

            2) useChatRoom Hook í™•ì¥ ì‚¬í•­:
               - ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€: ì´ˆê¸° ë©”ì‹œì§€ ë¡œë“œ, postgres_changes êµ¬ë…, useRealtimeChat í†µí•©, ì½ìŒ ì²˜ë¦¬, ì¤‘ë³µ ë©”ì‹œì§€ ë°©ì§€
               - ì¶”ê°€ ê¸°ëŠ¥: ë©”ì‹œì§€ ê·¸ë£¹í™”, í¬ë§·íŒ…, ìƒëŒ€ë°© ì •ë³´ ì¡°íšŒ ë° í¬ë§·íŒ…
               - ë°˜í™˜ íƒ€ì… í™•ì¥: formattedMessages, otherMemberInfo, isBlocked ì¶”ê°€

            3) Hook ë‚´ë¶€ì—ì„œ useChatList í˜¸ì¶œ:
               - useChatRoom Hook ë‚´ë¶€ì—ì„œ useChatListë¥¼ í˜¸ì¶œí•˜ì—¬ chatRooms ì¡°íšŒ
               - ë¬´í•œ ë£¨í”„ ë°©ì§€: useChatListëŠ” ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•˜ë¯€ë¡œ ë¬¸ì œ ì—†ìŒ
               - ë˜ëŠ” useChatRoomì˜ íŒŒë¼ë¯¸í„°ë¡œ chatRoomsë¥¼ ë°›ë„ë¡ ìˆ˜ì • ê°€ëŠ¥ (ì„±ëŠ¥ ìµœì í™”)

            4) ë©”ì‹œì§€ ì „ì†¡ í”Œë¡œìš°:
               - sendMessage í˜¸ì¶œ â†’ APIë¡œ DB ì €ì¥ â†’ Broadcastë¡œ ì‹¤ì‹œê°„ ì „ì†¡
               - postgres_changesë¡œ INSERT ì´ë²¤íŠ¸ ìˆ˜ì‹  â†’ messages ë°°ì—´ì— ìë™ ì¶”ê°€
               - ì¤‘ë³µ ë°©ì§€ë¥¼ ìœ„í•´ seenMessageIdsRefë¡œ ê´€ë¦¬
               - formattedMessagesëŠ” useMemoë¡œ ìë™ ì¬ê³„ì‚°ë¨

            5) í¬ë§·íŒ… í•¨ìˆ˜ ìœ„ì¹˜:
               - ëª¨ë“  í¬ë§·íŒ… í•¨ìˆ˜ëŠ” Hook ë‚´ë¶€ì— ì •ì˜
               - ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” í¬ë§·íŒ… í•¨ìˆ˜ë¥¼ importí•˜ê±°ë‚˜ ì •ì˜í•˜ì§€ ì•ŠìŒ
               - Hookì—ì„œ í¬ë§·íŒ…ëœ ë°ì´í„°ë¥¼ ë°›ì•„ì„œ ê·¸ëŒ€ë¡œ ì‚¬ìš©

            6) ìƒëŒ€ë°© ì •ë³´ ì¡°íšŒ:
               - useChatList Hookì„ ì‚¬ìš©í•˜ì—¬ ìƒëŒ€ë°© ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ ê¶Œì¥ ë°©ë²•ì„.
               - ì´ë¯¸ ë¡œë“œëœ chatRooms ë°ì´í„°ë¥¼ ì¬ì‚¬ìš©í•˜ë¯€ë¡œ ì¶”ê°€ API í˜¸ì¶œì´ ë¶ˆí•„ìš”í•˜ê³  ì„±ëŠ¥ìƒ ì´ì ì´ ìˆìŒ.
               - Hook ë‚´ë¶€ì—ì„œ ì²˜ë¦¬í•˜ë¯€ë¡œ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” otherMemberInfoë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©

            7) ì•„ë°”íƒ€ ì´ë¯¸ì§€ ì„ íƒ ë¡œì§:
               - ê³µí†µ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ì‚¬ìš©: src/lib/avatar/getAvatarImagePath.ts
               - Hook ë‚´ë¶€ì—ì„œ getAvatarImagePath í˜¸ì¶œí•˜ì—¬ avatarImagePath ê³„ì‚°
               - ì„ íƒ ìš°ì„ ìˆœìœ„:
                 1) otherMember?.avatar_urlì´ nullì´ ì•„ë‹Œ ê²½ìš°: avatar_url ì‚¬ìš©
                 2) otherMember?.avatar_urlì´ nullì¸ ê²½ìš°: animal_typeì„ ì‚¬ìš©í•˜ì—¬ ë™ë¬¼ íƒ€ì… ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸°
                 3) ë‘˜ ë‹¤ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ bear ì•„ë°”íƒ€ ì‚¬ìš©
               - ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” otherMemberInfo.avatarImagePathë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©

            8) ì‚¬ìš©ì ìƒíƒœ ì¡°íšŒ:
               - getEffectiveStatus í•¨ìˆ˜ ì‚¬ìš© (src/stores/user-status.store)
               - Hook ë‚´ë¶€ì—ì„œ otherMember?.idë¡œ ì‚¬ìš©ì ìƒíƒœ ì¡°íšŒ
               - ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” otherMemberInfo.userStatusë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©

            9) DB ìŠ¤í‚¤ë§ˆ ì •ë¦¬:
               - chat_rooms í…Œì´ë¸”: id (number), type (string | null), created_at (string | null)ë§Œ ì¡´ì¬
               - user_profiles í…Œì´ë¸”: id (string), nickname (string | null), animal_type (string), avatar_url (string | null) ë“±
               - user_profilesì— user_id, status í•„ë“œëŠ” ì—†ìŒ (id í•„ë“œê°€ user_id ì—­í• , statusëŠ” presence storeì—ì„œ ì¡°íšŒ)
               - chat_messages í…Œì´ë¸”: content, content_type, created_atì´ ëª¨ë‘ nullable

            10) ì¸ì¦ ë°©ì‹:
                - Hook ë‚´ë¶€ì—ì„œ useAuth() í˜¸ì¶œí•˜ì—¬ í˜„ì¬ ì‚¬ìš©ì ID ì¡°íšŒ
                - ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ì¸ì¦ ê´€ë ¨ ë¡œì§ì„ ì²˜ë¦¬í•˜ì§€ ì•ŠìŒ
                - Hookì—ì„œ user?.idë¥¼ ì‚¬ìš©í•˜ì—¬ isOwnMessage íŒë‹¨

            11) ì»´í¬ë„ŒíŠ¸ ì—­í• :
                - chatRoom.tsxëŠ” ì˜¤ë¡œì§€ UI ë Œë”ë§ë§Œ ë‹´ë‹¹
                - Hookì—ì„œ ë°›ì€ í¬ë§·ëœ ë°ì´í„°ë¥¼ ê·¸ëŒ€ë¡œ ë Œë”ë§
                - ìµœì†Œí•œì˜ UI ìƒíƒœ ê´€ë¦¬ë§Œ ìˆ˜í–‰ (messageInput ë“±)
                - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, í¬ë§·íŒ…, ë°ì´í„° ì²˜ë¦¬ ë¡œì§ì€ ëª¨ë‘ Hookì—ì„œ ì²˜ë¦¬


