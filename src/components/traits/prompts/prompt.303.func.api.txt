아래의 조건을 모두 적용하여, 아래의 요구사항을 모두 구현할 것.
구현 결과를 체크리스트로 반환할 것.

==============================================

조건-커서룰) 아래의 커서룰을 적용하여 작업하고, 이 작업이 끝나면 해당 rules 적용 결과를 체크리스트로 반환할 것.
            - @01-common.mdc
            - @04-func.mdc
            - 본 작업은 FE -> API 연결 구현이다.
            - Playwright E2E 테스트를 명세(spec)로 간주한다.
            - 테스트를 통과하도록 실제 구현 코드를 보완/수정한다.
            - 테스트 코드를 수정하지 않는다.
            - 도메인 계산 로직은 수정 금지
                - calculateTraitScores
	            - resolveAnimalType
            - API 설계, DB 구조 변경은 하지 않을 것.
            - 프론트엔드 -> API 연결에 한정한다.

==============================================

조건-파일경로) 참고 및 기준 파일 경로는 다음과 같음
        1. useTraitSurvey
            - src/components/traits/hooks/useTraitSurvey.ts
            - API 호출 금지, router 사용 금지
            - onComplete(payload) 호출 구조만 보장
        2. questions
            - src/components/traits/ui/question/question.tsx
            - 설문 완료 시점에 onComplete(payload) 호출
            - payload는 useTraitSurvey에서 내려받은 값 그대로 전달
            - 중복 호출 방지
        3. traitsTestPage
            - src/components/traits/traitsTestPage.tsx
            - API 호출(/api/traits/submit)
            - loading 상태 제어
            - 성공 시 /traits/result 이동
            - 실패 시 에러 상태 유지
        4. result
            - src/components/traits/traitsResultPage.tsx
            - 해당 페이지는 DB 조회 기준
            - 프론트엔드에서 계산된 값을 직접 사용하지 않을 것.
        5.  API Route Handler
            - src/app/api/traits/submit/route.ts
            - 이미 구현 완료 상태
            - 책임: 인증, body 검증, service 호출, { ok: true } / { message, detail } 응답

        - 테스트 코드는 src/components/traits/tests 폴더 안에 작성할 것.

==============================================

아래 테스트 시나리오를 모두 통과하도록 구현할 것. 구현은 step-by-step으로 진행하고, 각 항목의 충족 여부를 체크리스트로 반환할 것.

핵심요구사항) 1. 설문 결과 payload 조립
        - useTraitSurvey에서 이미 계산된 값만 사용
        - 계산 로직 재호출하지 않을 것.
        - payload 구조는 아래와 정확히 일치할 것
            - {
                traits: traitScores,
                animalType,
                schedule: {
                    dayTypes,
                    timeSlots
                }
            }
        - Q_SCHEDULE 기준으로 추출된 schedule 결과만 포함

핵심요구사항) 2. Question -> TraitsPage 전달
        - 마지막 질문(Q_SCHEDULE) 답변 완료 시점에
            - onComplete(payload) 호출
        - onComplete에는 payload 객체만 전달
        - onComplete는 단 1회만 호출
        - 중복 호출 방지 로직을 명시적으로 구현

핵심요구사항) 3. TraitsPage -> API submit
        - /api/traits/submit로 POST 요청
        - Header
            - Content-Type: application/json
        - Body
            - user_id 포함 금지
        - submit 진행 중: 추가 submit 차단

핵심요구사항) 4. API 응답 처리
        - { ok: true }: /traits/result로 이동
        - { message, detail }: 에러 상태로 저장 (UI 크래시 X)
	    - 네트워크/서버 에러: catch 후 사용자 피드백 상태 설정

핵심요구사항) 5. 로딩 상태 처리
        - submit 시작 시 loading 상태 진입
        - loading 중: traits/loading.tsx 가 렌더링 됨
        - 성공/실패 후: loading 상태 해제 규칙 명확히 구현

핵심요구사항) 6. 실패 케이스 분기
        - 401: 에러 상태로 전환 (로그인 UX는 범위 외)
        - 400 / 500: 화면 유지, 결과 페이지로 이동 X
        - API 실패 시: /traits/result 로 이동 X

핵심요구사항) 7. DB 기준 결과 흐름 유지 (설계 전제)
        - FE는 계산 결과를 최종 진실로 사용하지 않는다
        - 결과 페이지는 DB 조회 결과 기준으로 렌더링 됨
        - 동일 유저 재요청 시 overwrite 되는 흐름을 전제로 한다

==============================================

조건-hook책임) useTraitSurvey
        - 설문 상태 관리
        - 결과 계산 완료 값 제공
        - API / router / side-effect X

==============================================

조건-UI책임) Question
        - 설문 진행
        - 완료 이벤트 발생
        - onComplete(payload) 호출만 담당

조건-UI책임) TraitsPage
        - payload 수신
        - API submit
        - loading / error / success 상태 제어
        - router 이동

==============================================

구현 완료 후 반환 체크리스트) 구현 완료 후 아래 체크리스트를 반환할 것.
        - payload 구조가 API 계약과 1:1 일치
        - onComplete 단일 호출 보장
        - API POST 요청 스펙 충족
        - loading 중 중복 submit 차단
        - 성공 시 결과 페이지 이동
        - 실패 시 이동 차단 및 에러 처리
        - FE -> API -> DB 기준 흐름 일관성 유지