/* Base Searchbar Styles */
.searchbar {
  display: flex;
  align-items: center;
  border: 1px solid transparent;
  font-family: inherit;
  font-style: normal;
  font-weight: var(--font-weight-regular);
  font-size: var(--typo-body-lg-font-size);
  line-height: var(--typo-body-lg-line-height);
  transition:
    background-color 0.2s,
    border-color 0.2s,
    color 0.2s;
  box-sizing: border-box;
  height: 48px;
  border-radius: 12px;
  padding: 0;
}

.searchbarContent {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  height: 100%;
  padding: 14px;
}

.inputField {
  flex: 1;
  border: none;
  outline: none;
  background: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  line-height: inherit;
  color: inherit;
  width: 100%;
  min-width: 0;
}

/* Theme - Mode-aware using semantic colors */
.searchbar {
  background-color: var(--color-bg-secondary);
  color: var(--color-text-interactive-secondary);
}

.inputField {
  color: var(--color-text-interactive-secondary);
}

.inputField::placeholder {
  color: var(--color-text-interactive-secondary);
  opacity: 0.6;
}

/* State Variants - CSS Pseudo-class 사용 */

/* 수동 state 클래스 (스토리북 등에서 강제 설정용) - 먼저 정의 */
.searchbar.state-default {
  border-color: transparent;
}

.searchbar.state-hover {
  border-color: var(--color-border-interactive-secondary);
}

.searchbar.state-active {
  border-color: var(--color-border-interactive-primary);
}

.searchbar.state-active .inputField,
.searchbar.state-active {
  color: var(--color-text-primary);
}

.searchbar.state-filled {
  border-color: transparent;
}

.searchbar.state-filled .inputField,
.searchbar.state-filled {
  color: var(--color-text-primary);
}

/* Pseudo-class 상태 (수동 state 클래스가 없을 때 작동) */

/* Hover State - state 클래스가 없을 때만 */
.searchbar:not(.state-hover):not(.state-active):not(.state-filled):hover {
  border-color: var(--color-border-interactive-secondary);
}

/* Active State (Focus) - input이 focus될 때 (hover보다 우선순위 높음, state 클래스가 없을 때만) */
.searchbar:not(.state-hover):not(.state-active):not(.state-filled):has(
    .inputField:focus
  ),
.searchbar:not(.state-hover):not(.state-active):not(.state-filled):has(
    .inputField:focus-visible
  ) {
  border-color: var(--color-border-interactive-primary);
}

.searchbar:not(.state-hover):not(.state-active):not(.state-filled):has(
    .inputField:focus
  )
  .inputField,
.searchbar:not(.state-hover):not(.state-active):not(.state-filled):has(
    .inputField:focus-visible
  )
  .inputField,
.searchbar:not(.state-hover):not(.state-active):not(.state-filled):has(
    .inputField:focus
  ),
.searchbar:not(.state-hover):not(.state-active):not(.state-filled):has(
    .inputField:focus-visible
  ) {
  color: var(--color-text-primary);
}

/* Filled State - input에 값이 입력된 상태 (placeholder가 보이지 않을 때, state 클래스가 없을 때만) */
.searchbar:not(.state-hover):not(.state-active):not(.state-filled):has(
    .inputField:not(:placeholder-shown)
  ) {
  border-color: transparent;
}

.searchbar:not(.state-hover):not(.state-active):not(.state-filled):has(
    .inputField:not(:placeholder-shown)
  )
  .inputField,
.searchbar:not(.state-hover):not(.state-active):not(.state-filled):has(
    .inputField:not(:placeholder-shown)
  ) {
  color: var(--color-text-primary);
}

/* Filled + Focus 조합 - 값이 있고 focus된 상태 */
.searchbar:not(.state-hover):not(.state-active):not(.state-filled):has(
    .inputField:not(:placeholder-shown):focus
  ) {
  border-color: var(--color-border-interactive-primary);
}
