아래의 조건을 모두 적용하여, 아래의 요구사항을 모두 구현할 것.
구현 결과를 체크리스트로 반환할 것.

==============================================

조건-커서룰) 아래의 커서룰을 적용하여 작업하고, 이 작업이 끝나면 해당 rules 적용 결과를 체크리스트로 반환할 것.
	        - Service Layer는 오케스트레이션만 수행한다
	        - Domain 로직 직접 구현 금지
	        - 계산 정책 / 점수 공식 / factor 정의 금지
	        - Context 조립은 전용 Service에 위임
	        - 단일 public 함수만 export
	        - throw / null 반환 금지
	        - Cold Start 포함 모든 경우에서 결과 DTO 반환
	        - 객체 mutation 금지 (immutability 유지)

==============================================

조건-파일경로) 참고 및 기준 파일 경로는 다음과 같다.
	- 구현 대상
        - src/services/match/calculateMatchResults.service.ts
	- 의존 Service(기존):
	    - src/services/match/getMatchCandidates.service.ts
	    - src/services/match/calculateMatchResult.service.ts
	- (참고) Service 패턴/구조가 존재한다면 동일 폴더의 다른 *.service.ts 구현 스타일을 우선 따를 것

==============================================

조건-구현참고) 반드시 참고할 기존 구현 패턴은 다음과 같다.
	    - getMatchCandidates.service.ts 는 후보 목록을 “조회/구조적 제외”만 수행 (점수 계산/Domain 호출/MatchContext 생성 ❌)
	    - calculateMatchResult.service.ts 는 “단일 후보(1:1) 매칭 결과를 계산하고 결과 DTO로 조립하는 오케스트레이터”
	    - calculateMatchResults.service.ts 는 위 두 Service를 조합해 “목록 오케스트레이션”만 수행해야 하며, 1:1 계산 로직을 재사용해야 함

==============================================

핵심요구사항) 다음 기능을 step-by-step으로 구현하고, 각 항목의 적용 여부를 체크리스트로 반환할 것.

0) 파일/Export 규칙
	    - 파일 위치: src/services/match/calculateMatchResults.service.ts
	    - 단일 public 함수만 export
	    - default export 금지, named export만 허용
	    - 외부로 노출되는 함수명은 반드시 calculateMatchResults

1) 함수 시그니처 (고정)
	    - 함수명: calculateMatchResults
	    - 입력:
	        - client: SupabaseClient
	        - viewerId: string
	    - 반환:
	        - Promise<MatchResultWithTarget[]>

2) 반환 타입 (고정)
	    - 아래 타입을 이 파일 내부에 정의하고(또는 필요 시 export), 반환 타입으로 사용
	    - Domain 타입 직접 의존 금지 (Domain 폴더/Domain 타입 import 금지)

        interface MatchResultWithTarget {
        targetUserId: string;
        finalScore: number;
        isOnlineMatched: boolean;
        availabilityHint: 'online' | 'offline' | 'unknown';
        }

	    - 포함 규칙:
	        - targetUserId 반드시 포함
	        - finalScore / isOnlineMatched / availabilityHint 는 calculateMatchResult 결과 필드 그대로 포함
	    - 금지:
	        - UI용 문구/퍼센트/게이지/표시 단위 가공 ❌
	        - tags, reasons 포함 ❌

3) 처리 흐름 (필수 순서 고정)
	1.	getMatchCandidates(client, viewerId) 호출
	2.	후보가 0명이면 즉시 [] 반환
	3.	각 후보에 대해:
	    - calculateMatchResult(client, viewerId, targetUserId) 호출
	4.	병렬 처리:
	    - Promise.all 대신 **반드시 “서비스에서 throw를 만들지 않는 방식”**으로 병렬 처리할 것 (단일 실패가 전체 실패로 전파되는 구조 방지 목적)
	    - 요구사항 “throw 사용 ❌”을 만족하기 위해 Promise.allSettled를 사용하고, fulfilled 결과만 추출하여 반환
	    - rejected 결과는 결과 배열에 포함하지 않는다
        - 배열 길이는 후보 수보다 작을 수 있다
	5.	최종 결과를 배열로 반환

4) 금지 사항 (강제)
	    - MatchContext 직접 조립 ❌
	    - Domain factor 함수 직접 호출 ❌
	    - 점수 기준 필터링 ❌ (예: score > 75)
	    - 정렬 로직 ❌
	    - mutation 금지:
	    - Object.assign ❌
	    - push ❌
	    - 외부 배열을 만들어 누적 ❌
	    - throw 사용 ❌
	    - null / undefined 반환 ❌ (항상 배열 반환)

5) Cold Start 대응 (정책 구현 금지, “흐름 유지”만)
	    - 후보는 있으나 데이터가 부족한 경우(Cold Start)여도 계산 시도를 막지 말 것
	    - Cold Start 결과도 그대로 배열에 포함 (단, calculateMatchResult가 정상 값을 반환한다는 전제에서 그대로 포함)
	    - Cold Start를 예외로 취급하는 분기/처리 ❌

6) Immutability 규칙
	    - Repository 반환값(후보 리스트 등) 직접 수정 ❌
	    - map / filter 중심으로 새 배열/새 객체로 결과 조립
	    - 반환 객체는 항상 새로운 객체 리터럴로 생성

7) 의존성 규칙
	    - 의존은 아래 2개 Service만 허용:
	    - getMatchCandidates
	    - calculateMatchResult
	    - UI / Hook / Store 의존 ❌
	    - Domain 타입 직접 의존 ❌

==============================================

조건-Hook 책임)
	    - 해당 작업은 Hook 책임 없음 (N/A)
	    - Hook 파일 생성/수정 금지

==============================================

조건-UI 책임)
	    - 해당 작업은 UI 책임 없음 (N/A)
	    - UI 컴포넌트/스토어/훅 수정 금지

==============================================

구현 완료 후 반환) 아래 체크리스트를 반드시 반환할 것.
	1.	Service 정체성
	    - Service Layer는 오케스트레이션만 수행한다
	    - 점수 계산 / 정책 판단 / 의미 해석 로직이 없다
	    - Domain 로직은 calculateMatchResult만 호출한다
	    - 후보 선정 로직은 getMatchCandidates에 위임한다

	2.	파일 / 위치 / export
	    - 파일 위치가 src/services/match/calculateMatchResults.service.ts 이다
	    - 단일 public 함수만 export 한다
	    - default export ❌, named export ✅

	3.	함수 시그니처
	    - 함수명: calculateMatchResults
	    - 입력: (client: SupabaseClient, viewerId: string)
	    - 반환: Promise<MatchResultWithTarget[]>

	4.	반환 타입 규칙
	    - MatchResultWithTarget 타입은 Service Layer 전용 타입이다
	    - calculateMatchResult 결과 필드(finalScore, isOnlineMatched, availabilityHint)를 그대로 포함
	    - UI용 문구/퍼센트/게이지 없음
	    - tags / reasons 포함 ❌

	5.	처리 흐름 (순서)
	    - getMatchCandidates(client, viewerId) 호출
	    - 후보 0명이면 [] 즉시 반환
	    - 각 후보에 대해 calculateMatchResult(client, viewerId, targetUserId) 호출
	    - 병렬 처리 수행
	    - 결과를 배열로 반환

	6.	금지 사항
	    - MatchContext 직접 조립 ❌
	    - Domain factor 함수 직접 호출 ❌
	    - 점수 기준 필터링 ❌
	    - 정렬 로직 ❌
	    - Object.assign / push / mutation ❌
	    - throw 사용 ❌
	    - null / undefined 반환 ❌

	7.	Cold Start 대응
	    - 후보는 있으나 데이터 없는 경우에도 계산 시도를 막지 않는다
	    - Cold Start 결과도 그대로 배열에 포함되도록 흐름이 유지된다
	    - Cold Start를 예외로 취급하지 않는다

	8.	Immutability
	    - Repository 반환값 직접 수정 ❌
	    - map / filter만 사용
	    - 새로운 객체로 결과 조립

	9.	의존성 규칙
	    - getMatchCandidates, calculateMatchResult 외 의존 없음
	    - Domain 타입 직접 의존 ❌
	    - UI / Hook / Store 의존 ❌