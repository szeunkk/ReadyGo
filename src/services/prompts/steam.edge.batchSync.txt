아래의 조건을 모두 적용하여, 아래의 요구사항을 모두 구현할 것.
구현 결과를 체크리스트로 반환할 것.

==============================================

조건-커서룰) 아래의 커서룰을 적용하여 작업하고, 이 작업이 끝나면 해당 rules 적용 결과를 체크리스트로 반환할 것.
	- Edge Function / Batch Service 책임 분리
	- Edge Function은 얇은 진입점 (HTTP + Client 생성)
	- Batch Service가 실제 배치 로직 수행
	- 기존 syncSteamGames Service 재사용
	- 개별 실패가 전체 배치를 멈추지 않도록 설계
	- named export만 허용

==============================================

조건-파일경로) 참고 및 기준 파일 경로는 다음과 같다.
	- Edge Function 진입점
		- supabase/functions/steam-sync-batch/index.ts
	- Batch Service
		- supabase/functions/_shared/services/steam/batchSyncSteamGames.service.ts
	- 재사용 Service
		- supabase/functions/_shared/services/steam/syncSteamGames.service.ts
	- 공통 타입
		- supabase/functions/_shared/types/dbClient.ts

==============================================

조건-구현참고) 반드시 참고할 기존 구현 패턴은 다음과 같다.
	- syncSteamGames Service는 Node/Deno 양쪽에서 사용 가능하도록 설계됨
	- Service는 Supabase client를 외부에서 주입받음
	- Edge Function은 Deno 런타임, Service Role Key 사용
	- DbClient 인터페이스로 Node/Deno 타입 차이 흡수

==============================================

핵심요구사항) 다음 기능을 step-by-step으로 구현하고, 각 항목의 적용 여부를 체크리스트로 반환할 것.

1. Edge Function 진입점 (index.ts)
	- Deno.serve()로 HTTP 핸들러 생성
	- OPTIONS 요청 처리 (CORS)
	- Service Role Supabase Client 생성
		- SUPABASE_URL
		- SUPABASE_SERVICE_ROLE_KEY (환경변수)
	- batchSyncSteamGames Service 호출
	- 결과를 JSON으로 반환
	- CORS Headers 포함

2. Batch Service 구현 (batchSyncSteamGames.service.ts)
	- fetchTargetUsers(client, limit)
		- SELECT id FROM user_profiles WHERE steam_id IS NOT NULL LIMIT 50
	- 유저별 syncSteamGames 호출
		- for-loop 순회
		- 개별 실패 시 catch → 로그만 출력, 계속 진행
		- 전체 배치 중단 금지
	- 결과 집계
		type BatchSyncResult = {
		  totalUsers: number;
		  successful: number;
		  failed: number;
		  errors: Array<{
		    userId: string;
		    status: string;
		    error?: string;
		  }>;
		}

3. 개별 실패 격리 전략 ⭐ 핵심
	- try-catch로 각 유저 처리 감싸기
	- catch 블록:
		- result.failed++
		- result.errors.push({ userId, status: 'unexpected_error', error: error.message })
		- console.error로 로깅
		- 다음 유저로 계속 진행
	- 이유: 한 명의 오류가 전체 배치를 멈춰서는 안 됨

4. Resource 제한 대응
	- 배치 크기: 50명 (조정 가능)
	- 이유: Edge Function WORKER_LIMIT 회피
	- 게임 수 제한: 1000개/유저 (syncSteamGames에서 처리)
	- Store API Rate Limit: 10개마다 100ms 대기

5. Cron 설정 (pg_net 사용)
	- SQL Editor에서 실행:
		SELECT cron.schedule(
		  'steam-batch-sync-daily',
		  '15 2 * * *',
		  $$
		  SELECT net.http_post(
		    'https://PROJECT_REF.supabase.co/functions/v1/steam-sync-batch',
		    '{}',
		    'application/json',
		    jsonb_build_object(
		      'Authorization', 'Bearer ' || vault.get_secret('SERVICE_ROLE_KEY')
		    )
		  );
		  $$
		);
	
	- 시간: 한국시간 새벽 4시 (15시 2분 UTC = 자정 2시 15분 KST)
	- pg_net extension 활성화 필요
	- Supabase Vault에 SERVICE_ROLE_KEY 저장

6. 보안 고려사항
	- Edge Function은 Service Role Key 사용 → RLS 우회
	- Cron Job은 Supabase Vault로 키 관리
	- HTTP 요청은 내부 네트워크만 허용 (Cron에서만 호출)

7. 로깅 전략
	- 배치 시작/종료 로그
	- 유저별 성공/실패 상태
	- 총 처리 시간
	- 에러 메시지 포함
	- 예시:
		[Batch Start] Target: 50 users
		[User 1/50] ✓ 721 games synced
		[User 2/50] ✗ private profile
		[Batch End] Success: 45, Failed: 5 (120.5s)

==============================================

조건-Hook 책임)
	- 해당 없음

==============================================

조건-UI 책임)
	- 해당 없음

==============================================

구현 완료 후 반환) 아래 체크리스트를 반드시 반환할 것.
	- Edge Function이 얇은 진입점으로 구현되어 있다
	- Batch Service가 배치 로직을 수행한다
	- syncSteamGames를 재사용한다
	- 개별 실패가 전체 배치를 중단하지 않는다
	- Service Role Client를 사용한다
	- 배치 크기가 50명으로 제한되어 있다
	- CORS Headers가 포함되어 있다
	- 에러 로그에 error.message가 포함되어 있다
	- Cron Job이 pg_net으로 설정되어 있다
	- Supabase Vault를 사용한다

